import{S as q,C as L,a as D,b as K}from"./CRY8Xxv5.js";function R(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function N(e){if(Array.isArray(e))return e}function U(e){if(Array.isArray(e))return R(e)}function $(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,n,t){return n=x(n),ot(e,I()?Reflect.construct(n,t||[],x(e).constructor):n.apply(e,t))}function Q(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function V(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,st(r.key),r)}}function Z(e,n,t){return n&&V(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},x(e)}function tt(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&A(e,n)}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I=function(){return!!e})()}function et(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rt(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var r,h,i,c,y=[],o=!0,_=!1;try{if(i=(t=t.call(e)).next,n===0){if(Object(t)!==t)return;o=!1}else for(;!(o=(r=i.call(t)).done)&&(y.push(r.value),y.length!==n);o=!0);}catch(a){_=!0,h=a}finally{try{if(!o&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(_)throw h}}return y}}function nt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function it(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ot(e,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}function A(e,n){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},A(e,n)}function H(e,n){return N(e)||rt(e,n)||Y(e,n)||nt()}function v(e){return U(e)||et(e)||Y(e)||it()}function at(e,n){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,n);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function st(e){var n=at(e,"string");return typeof n=="symbol"?n:n+""}function Y(e,n){if(e){if(typeof e=="string")return R(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?R(e,n):void 0}}var b=typeof window<"u"&&window.THREE?window.THREE:{CanvasTexture:L,Sprite:q,SpriteMaterial:K,SRGBColorSpace:D},ut=function(e){function n(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"rgba(255, 255, 255, 1)";return Q(this,n),t=J(this,n,[new b.SpriteMaterial]),t._text="".concat(r),t._textHeight=h,t._color=i,t._backgroundColor=!1,t._padding=0,t._borderWidth=0,t._borderRadius=0,t._borderColor="white",t._offsetX=0,t._offsetY=0,t._strokeWidth=0,t._strokeColor="white",t._fontFace="system-ui",t._fontSize=90,t._fontWeight="normal",t._canvas=document.createElement("canvas"),t._genCanvas(),t}return tt(n,e),Z(n,[{key:"text",get:function(){return this._text},set:function(r){this._text=r,this._genCanvas()}},{key:"textHeight",get:function(){return this._textHeight},set:function(r){this._textHeight=r,this._genCanvas()}},{key:"color",get:function(){return this._color},set:function(r){this._color=r,this._genCanvas()}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._genCanvas()}},{key:"padding",get:function(){return this._padding},set:function(r){this._padding=r,this._genCanvas()}},{key:"borderWidth",get:function(){return this._borderWidth},set:function(r){this._borderWidth=r,this._genCanvas()}},{key:"borderRadius",get:function(){return this._borderRadius},set:function(r){this._borderRadius=r,this._genCanvas()}},{key:"borderColor",get:function(){return this._borderColor},set:function(r){this._borderColor=r,this._genCanvas()}},{key:"offsetX",get:function(){return this._offsetX},set:function(r){this._offsetX=r,this._genCanvas()}},{key:"offsetY",get:function(){return this._offsetY},set:function(r){this._offsetY=r,this._genCanvas()}},{key:"fontFace",get:function(){return this._fontFace},set:function(r){this._fontFace=r,this._genCanvas()}},{key:"fontSize",get:function(){return this._fontSize},set:function(r){this._fontSize=r,this._genCanvas()}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(r){this._fontWeight=r,this._genCanvas()}},{key:"strokeWidth",get:function(){return this._strokeWidth},set:function(r){this._strokeWidth=r,this._genCanvas()}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(r){this._strokeColor=r,this._genCanvas()}},{key:"_genCanvas",value:function(){var r=this,h=this._canvas,i=h.getContext("2d"),c=1/this.textHeight,y=Array.isArray(this.borderWidth)?this.borderWidth:[this.borderWidth,this.borderWidth],o=y.map(function(s){return s*r.fontSize*c}),_=Array.isArray(this.borderRadius)?this.borderRadius:[this.borderRadius,this.borderRadius,this.borderRadius,this.borderRadius],a=_.map(function(s){return s*r.fontSize*c}),O=Array.isArray(this.padding)?this.padding:[this.padding,this.padding],w=O.map(function(s){return s*r.fontSize*c}),T=[this.offsetX,this.offsetY].map(function(s){return s*r.fontSize*c}),m=this.text.split(`
`),P="".concat(this.fontWeight," ").concat(this.fontSize,"px ").concat(this.fontFace);i.font=P;var j=Math.max.apply(Math,v(m.map(function(s){return i.measureText(s).width}))),B=this.fontSize*m.length,f=j+o[0]*2+w[0]*2,u=B+o[1]*2+w[1]*2;if(h.width=f+Math.abs(T[0]),h.height=u+Math.abs(T[1]),i.translate.apply(i,v(T.map(function(s){return Math.max(0,s)}))),this.borderWidth){if(i.strokeStyle=this.borderColor,o[0]){var C=o[0]/2;i.lineWidth=o[0],i.beginPath(),i.moveTo(C,a[0]),i.lineTo(C,u-a[3]),i.moveTo(f-C,a[1]),i.lineTo(f-C,u-a[2]),i.stroke()}if(o[1]){var k=o[1]/2;i.lineWidth=o[1],i.beginPath(),i.moveTo(Math.max(o[0],a[0]),k),i.lineTo(f-Math.max(o[0],a[1]),k),i.moveTo(Math.max(o[0],a[3]),u-k),i.lineTo(f-Math.max(o[0],a[2]),u-k),i.stroke()}if(this.borderRadius){var M=Math.max.apply(Math,v(o)),d=M/2;i.lineWidth=M,i.beginPath(),[!!a[0]&&[a[0],d,d,a[0]],!!a[1]&&[f-a[1],f-d,d,a[1]],!!a[2]&&[f-a[2],f-d,u-d,u-a[2]],!!a[3]&&[a[3],d,u-d,u-a[3]]].filter(function(s){return s}).forEach(function(s){var l=H(s,4),p=l[0],g=l[1],S=l[2],W=l[3];i.moveTo(p,S),i.quadraticCurveTo(g,S,g,W)}),i.stroke()}}this.backgroundColor&&(i.fillStyle=this.backgroundColor,this.borderRadius?(i.beginPath(),i.moveTo(o[0],a[0]),[[o[0],a[0],f-a[1],o[1],o[1],o[1]],[f-o[0],f-o[0],f-o[0],o[1],a[1],u-a[2]],[f-o[0],f-a[2],a[3],u-o[1],u-o[1],u-o[1]],[o[0],o[0],o[0],u-o[1],u-a[3],a[0]]].forEach(function(s){var l=H(s,6),p=l[0],g=l[1],S=l[2],W=l[3],X=l[4],G=l[5];i.quadraticCurveTo(p,W,g,X),i.lineTo(S,G)}),i.closePath(),i.fill()):i.fillRect(o[0],o[1],f-o[0]*2,u-o[1]*2)),i.translate.apply(i,v(o)),i.translate.apply(i,v(w)),i.font=P,i.fillStyle=this.color,i.textBaseline="bottom";var z=this.strokeWidth>0;z&&(i.lineWidth=this.strokeWidth*this.fontSize/10,i.strokeStyle=this.strokeColor),m.forEach(function(s,l){var p=(j-i.measureText(s).width)/2,g=(l+1)*r.fontSize;z&&i.strokeText(s,p,g),i.fillText(s,p,g)}),this.material.map&&this.material.map.dispose();var F=this.material.map=new b.CanvasTexture(h);F.colorSpace=b.SRGBColorSpace;var E=this.textHeight*m.length+y[1]*2+O[1]*2+Math.abs(this.offsetY);this.scale.set(E*h.width/h.height,E,0)}},{key:"clone",value:function(){return new this.constructor(this.text,this.textHeight,this.color).copy(this)}},{key:"copy",value:function(r){return b.Sprite.prototype.copy.call(this,r),this.color=r.color,this.backgroundColor=r.backgroundColor,this.padding=r.padding,this.borderWidth=r.borderWidth,this.borderColor=r.borderColor,this.offsetX=r.offsetX,this.offsetY=r.offsetY,this.fontFace=r.fontFace,this.fontSize=r.fontSize,this.fontWeight=r.fontWeight,this.strokeWidth=r.strokeWidth,this.strokeColor=r.strokeColor,this}}])}(b.Sprite);export{ut as default};
